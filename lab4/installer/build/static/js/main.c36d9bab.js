(()=>{"use strict";var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var s in t)e.o(t,s)&&!e.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:t[s]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=require("react");var t=e.n(r);const s=require("react-dom/client");var n=e.n(s);const a=(0,r.createContext)(),o=require("react-router-dom"),i=require("react/jsx-runtime");const c=function(){const e=(0,o.useNavigate)(),[t,s]=(0,r.useState)(null),{setUser:n}=(0,r.useContext)(a);return(0,i.jsx)("div",{className:"login-container",children:(0,i.jsxs)("form",{className:"login-form",onSubmit:async r=>{r.preventDefault();const a={name:r.target.username.value,password:r.target.password.value};try{const r=await fetch("http://localhost:5000/auth",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)});if(r.ok){const t=await r.json();t.password=a.password,n(t),e("/installer")}else s((0,i.jsx)("p",{className:"error-msg",children:"Incorrect login or password"}))}catch(t){console.error("Error:",t),s((0,i.jsx)("p",{className:"error-msg",children:"An error occurred. Please try again later."}))}},method:"post",children:[(0,i.jsx)("h2",{children:"Login"}),(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{htmlFor:"username",children:"Username"}),(0,i.jsx)("input",{name:"username",type:"text",pattern:"[A-Za-z0-9]{1,28}",required:!0})]}),(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{htmlFor:"password",children:"Password"}),(0,i.jsx)("input",{name:"password",type:"password",pattern:"[A-Za-z0-9]{1,28}",required:!0})]}),(0,i.jsx)("button",{type:"submit",children:"Submit"}),t]})})},l=(require("original-fs"),require("path"));var u=e.n(l);const d=require("url"),h=require("fs");var p=e.n(h);const m=require("adm-zip");var x=e.n(m);const j=require("systeminformation");var f=e.n(j);const g=(0,d.fileURLToPath)("file:///home/Ma3yTuK/Labs/sem6/isob/lab4/installer/src/pages/Installer.js"),y=(0,l.dirname)(g);const v=function(){(0,o.useNavigate)();const[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!0),{user:c,setUser:l}=(0,r.useContext)(a);return(0,r.useEffect)((()=>{fetch("http://localhost:5000/app",{method:"GET",headers:{Authorization:"Basic "+btoa("".concat(c.name,":").concat(c.password))}}).then((e=>{e.arrayBuffer().then((e=>{e=Buffer.from(e);new(x())(e).extractAllTo(y,!0,!0),f().bios().then((e=>{p().writeFileSync(u().join(y,"react-app-linux-x64/key"),JSON.stringify(e)),n(!1)}))}))}))}),[]),s?(0,i.jsx)("p",{children:"Installing"}):(0,i.jsx)("p",{children:"Finished successfully"})};const b=function(){const[e,t]=(0,r.useState)(),[s,n]=(0,r.useState)(!0),l={user:e,setUser:t};return(0,i.jsx)(a.Provider,{value:l,children:(0,i.jsx)(o.HashRouter,{children:(0,i.jsxs)(o.Routes,{children:[(0,i.jsx)(o.Route,{path:"/",element:(0,i.jsx)(c,{})}),(0,i.jsx)(o.Route,{path:"/installer",element:(0,i.jsx)(v,{})})]})})})};n().createRoot(document.getElementById("root")).render((0,i.jsx)(t().StrictMode,{children:(0,i.jsx)(b,{})}))})();
//# sourceMappingURL=main.c36d9bab.js.map
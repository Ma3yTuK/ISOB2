(()=>{"use strict";var e={n:s=>{var t=s&&s.__esModule?()=>s.default:()=>s;return e.d(t,{a:t}),t},d:(s,t)=>{for(var r in t)e.o(t,r)&&!e.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:t[r]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=require("react");var t=e.n(s);const r=require("react-dom/client");var n=e.n(r);const a=(0,s.createContext)(),o=(0,s.createContext)({admin:1,client:0}),i=require("react-router-dom"),c=require("react/jsx-runtime");const l=function(){const e=(0,i.useNavigate)(),[t,r]=(0,s.useState)(null),{setUser:n}=(0,s.useContext)(a);return(0,c.jsx)("div",{className:"login-container",children:(0,c.jsxs)("form",{className:"login-form",onSubmit:async s=>{s.preventDefault();const a={name:s.target.username.value,password:s.target.password.value};try{const s=await fetch("http://localhost:5000/auth",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)});if(s.ok){const t=await s.json();t.password=a.password,n(t),e("/home")}else r((0,c.jsx)("p",{className:"error-msg",children:"Incorrect login or password"}))}catch(t){console.error("Error:",t),r((0,c.jsx)("p",{className:"error-msg",children:"An error occurred. Please try again later."}))}},method:"post",children:[(0,c.jsx)("h2",{children:"Login"}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"username",children:"Username"}),(0,c.jsx)("input",{name:"username",type:"text",pattern:"[A-Za-z0-9]{1,28}",required:!0})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"password",children:"Password"}),(0,c.jsx)("input",{name:"password",type:"password",pattern:"[A-Za-z0-9]{1,28}",required:!0})]}),(0,c.jsx)("button",{type:"submit",children:"Submit"}),t]})})};const u=function(){const e=(0,i.useNavigate)(),[t,r]=(0,s.useState)(null),{user:n}=(0,s.useContext)(a),[l,u]=(0,s.useState)(!1),[d,m]=(0,s.useState)([]),h=(0,s.useContext)(o);return(0,s.useEffect)((()=>{!async function(){try{const e=await fetch("http://localhost:5000/users",{method:"GET",headers:{Authorization:"Basic "+btoa("".concat(n.name,":").concat(n.password))}});if(e.ok){const s=await e.json();m(s),n.id_role===h.admin&&u(!0)}else r((0,c.jsx)("p",{className:"error-msg",children:"Permission denied"}))}catch(t){console.error("Error:",t),r((0,c.jsx)("p",{className:"error-msg",children:"An error occurred. Please try again later."}))}}()}),[n,h.admin]),(0,c.jsx)("div",{className:"login-container",children:(0,c.jsxs)("div",{className:"user-list",children:[(0,c.jsx)("h2",{children:"Users:"}),l&&(0,c.jsx)("button",{className:"add-user-btn",onClick:()=>e("/user/insert"),children:"Add User"}),(0,c.jsx)("ul",{children:d.map((e=>(0,c.jsx)("li",{children:(0,c.jsx)(i.Link,{to:"/user/".concat(e.id),children:e.name})},e.id)))}),(0,c.jsx)(i.Link,{to:"/home",className:"go-home-link",children:"Go Home"}),t]})})};const d=function(){const e=(0,i.useNavigate)(),[t,r]=(0,s.useState)(null),{user:n}=(0,s.useContext)(a);return(0,c.jsx)("div",{className:"user-creation-container",children:(0,c.jsxs)("form",{className:"user-creation-form",onSubmit:async s=>{s.preventDefault();const a={name:s.target.username.value,password:s.target.password.value,description:s.target.description.value,id_role:s.target.role.value};try{(await fetch("http://localhost:5000/user_by_name/".concat(a.name),{method:"PUT",headers:{"Content-type":"application/json",Authorization:"Basic "+btoa("".concat(n.name,":").concat(n.password))},body:JSON.stringify(a)})).ok?e("/users"):r((0,c.jsx)("p",{className:"error-msg",children:"Cannot create user"}))}catch(t){console.error("Error:",t),r((0,c.jsx)("p",{className:"error-msg",children:"An error occurred. Please try again later."}))}},method:"post",children:[(0,c.jsx)("h2",{children:"User Creation"}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"username",children:"Username"}),(0,c.jsx)("input",{name:"username",type:"text",pattern:"[A-Za-z0-9]{1,28}",required:!0})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"password",children:"Password"}),(0,c.jsx)("input",{name:"password",type:"password",pattern:"[A-Za-z0-9]{1,28}",required:!0})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"description",children:"Description"}),(0,c.jsx)("input",{name:"description",type:"text",pattern:"[A-Za-z0-9 ]{1,255}",required:!0})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"role",children:"Role"}),(0,c.jsx)("input",{name:"role",type:"number",min:"0",max:"1",required:!0})]}),(0,c.jsx)("button",{type:"submit",children:"Submit"}),t,(0,c.jsx)(i.Link,{to:"/home",className:"go-home-link",children:"Go Home"})]})})};const m=function(){const e=(0,i.useNavigate)(),{id:t}=(0,i.useParams)(),[r,n]=(0,s.useState)(null),{user:l}=(0,s.useContext)(a),[u,d]=(0,s.useState)(null),[m,h]=(0,s.useState)(!1),p=(0,s.useContext)(o);return(0,s.useEffect)((()=>{!async function(){try{const e=await fetch("http://localhost:5000/user/".concat(t),{method:"GET",headers:{Authorization:"Basic "+btoa("".concat(l.name,":").concat(l.password))}});if(e.ok){const s=await e.json();d(s),l.id_role!==p.admin&&l.id!==s.id||h(!0)}else n((0,c.jsx)("p",{className:"error-msg",children:"Permission denied"}))}catch(r){console.error("Error:",r),n((0,c.jsx)("p",{className:"error-msg",children:"An error occurred. Please try again later."}))}}()}),[t,l,p.admin]),(0,c.jsx)("div",{className:"user-profile-container",children:(0,c.jsxs)("div",{className:"user-details",children:[(0,c.jsx)("h2",{children:"User Profile:"}),u&&(0,c.jsxs)("div",{children:[(0,c.jsxs)("h3",{children:["Username: ",u.name]}),(0,c.jsxs)("p",{children:["Description: ",u.description]}),(0,c.jsxs)("p",{children:["Role: ",u.id_role]})]}),m&&(0,c.jsxs)("div",{className:"admin-options",children:[(0,c.jsx)("button",{onClick:()=>e("/user/update/".concat(t)),children:"Update"}),(0,c.jsx)("button",{onClick:()=>e("/user/delete/".concat(t)),children:"Delete"})]}),(0,c.jsx)(i.Link,{to:"/home",className:"go-home-link",children:"Go Home"}),r]})})};const h=function(){const e=(0,i.useNavigate)(),{id:t}=(0,i.useParams)(),[r,n]=(0,s.useState)(null),{user:o,setUser:l}=(0,s.useContext)(a),[u,d]=(0,s.useState)(null),m=async s=>{s.preventDefault();const a={id:t,name:s.target.username.value,description:s.target.description.value};try{(await fetch("http://localhost:5000/user/".concat(t),{method:"PATCH",headers:{"Content-type":"application/json",Authorization:"Basic "+btoa("".concat(o.name,":").concat(o.password))},body:JSON.stringify(a)})).ok?(t==o.id&&l({...o,name:s.target.username.value}),e("/users")):n((0,c.jsx)("p",{className:"error-msg",children:"Cannot update user"}))}catch(r){console.error("Error:",r),n((0,c.jsx)("p",{className:"error-msg",children:"An error occurred. Please try again later."}))}};return(0,s.useEffect)((()=>{!async function(){try{const e=await fetch("http://localhost:5000/user/".concat(t),{method:"GET",headers:{Authorization:"Basic "+btoa("".concat(o.name,":").concat(o.password))}});if(e.ok){const s=await e.json();d((0,c.jsxs)("form",{className:"update-form",onSubmit:m,children:[(0,c.jsx)("label",{children:"Username"}),(0,c.jsx)("br",{}),(0,c.jsx)("input",{name:"username",defaultValue:s.name,type:"text",required:!0}),(0,c.jsx)("br",{}),(0,c.jsx)("label",{children:"Description"}),(0,c.jsx)("br",{}),(0,c.jsx)("input",{name:"description",defaultValue:s.description,type:"text",required:!0}),(0,c.jsx)("br",{}),(0,c.jsx)("button",{type:"submit",children:"Submit"})]}))}else n((0,c.jsx)("p",{className:"error-msg",children:"Permission denied"}))}catch(r){console.error("Error:",r),n((0,c.jsx)("p",{className:"error-msg",children:"An error occurred. Please try again later."}))}}()}),[t,o]),(0,c.jsx)("div",{className:"update-container",children:(0,c.jsxs)("div",{className:"update-form-container",children:[u,r,(0,c.jsx)(i.Link,{to:"/home",className:"go-home-link",children:"Go Home"})]})})};const p=function(){const e=(0,i.useNavigate)(),{id:t}=(0,i.useParams)(),[r,n]=(0,s.useState)(null),{user:l,setUser:u}=(0,s.useContext)(a),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null);return(0,s.useContext)(o),(0,s.useEffect)((()=>{d||(m(!0),console.log("CALLED"),fetch("http://localhost:5000/user/"+t,{method:"DELETE",headers:{Authorization:"Basic "+btoa("".concat(l.name,":").concat(l.password))}}).then((s=>{s.ok?e("/home"):p((0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:"Permission denied"}),(0,c.jsx)(i.Link,{to:"/home",children:"Go home"})]}))})))}),[d]),(0,c.jsx)("div",{children:h})};const x=function(){const e=(0,i.useNavigate)(),[t,r]=(0,s.useState)(null),{user:n}=(0,s.useContext)(a);return(0,c.jsxs)("div",{className:"login-container",children:[(0,c.jsxs)("div",{className:"sidebar",children:[(0,c.jsx)("h1",{className:"logo",children:"Your App Name"}),(0,c.jsxs)("div",{className:"links",children:[(0,c.jsx)(i.Link,{to:"/users",children:"User List"}),(0,c.jsx)(i.Link,{to:"/user/".concat(n.id),children:"Profile"}),(0,c.jsx)("button",{onClick:()=>{e("/logout")},children:"Log out"})]})]}),(0,c.jsx)("div",{className:"content",children:(0,c.jsxs)("h2",{children:["Welcome, ",n.name,"!"]})})]})};const j=function(){const e=(0,i.useNavigate)(),{id:t}=(0,i.useParams)(),[r,n]=(0,s.useState)(null),{user:c,setUser:l}=(0,s.useContext)(a),[u,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null);(0,s.useContext)(o),(0,s.useEffect)((()=>{u||(l(null),e("/"))}))},g=require("systeminformation");var f=e.n(g);const N=require("fs");var v=e.n(N);const y=function(){const[e,t]=(0,s.useState)(),[r,n]=(0,s.useState)(!0),o={user:e,setUser:t};return(0,s.useEffect)((()=>{f().bios().then((e=>{v().existsSync("key")&&JSON.stringify(e)==v().readFileSync("key")||n(!1)}))})),r?(0,c.jsx)(a.Provider,{value:o,children:(0,c.jsx)(i.HashRouter,{children:(0,c.jsxs)(i.Routes,{children:[(0,c.jsx)(i.Route,{path:"/",element:(0,c.jsx)(l,{})}),(0,c.jsx)(i.Route,{path:"/users",element:(0,c.jsx)(u,{})}),(0,c.jsx)(i.Route,{path:"/user/insert",element:(0,c.jsx)(d,{})}),(0,c.jsx)(i.Route,{path:"/user/:id",element:(0,c.jsx)(m,{})}),(0,c.jsx)(i.Route,{path:"/user/update/:id",element:(0,c.jsx)(h,{})}),(0,c.jsx)(i.Route,{path:"/user/delete/:id",element:(0,c.jsx)(p,{})}),(0,c.jsx)(i.Route,{path:"/logout",element:(0,c.jsx)(j,{})}),(0,c.jsx)(i.Route,{path:"/home",element:(0,c.jsx)(x,{})})]})})}):(0,c.jsx)("p",{children:"Invalid key"})};n().createRoot(document.getElementById("root")).render((0,c.jsx)(t().StrictMode,{children:(0,c.jsx)(y,{})}))})();
//# sourceMappingURL=main.e92187dd.js.map